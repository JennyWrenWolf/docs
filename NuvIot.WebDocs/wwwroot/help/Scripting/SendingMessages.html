<p><a href="#/index">Home</a> &gt; <a href="#/scripting/index">Scripting</a></p>
<h1>Sending Messages</h1>
<p>At the heart of NuvIoT is a messaaging engine.  You interact with devices in your device repository by sending messages.
These messages are sent internally and are very fast.  They are not sent directly down to the device but a device message handler
within NuvIoT.  From that device you can send a message back down to the device.</p>
<p>You can send messages to a specific device by it's device id or you can send a message to all devices of a specific device configuration.</p>
<h3>Sending a Message to a Device</h3>
<p>The following script will queue up a message with a message id of <code>msg001</code> to a device <code>dev001</code> that will be processed by the NuvIoT message processor.
Messages must be JSON.  To handle the message the device configuration for the device <code>dev001</code> must be able to handle a message <code>msg001</code></p>
<pre><code>function forwardMessage() {
    let msgId = 'msg001';
    let deviceId = 'dev001';
    let message = {'contents':'helloWorld'};

    enqueuePEM(msgId, deviceId, message);
}
</code></pre>
<h2>Sending a Message to all devices of a Device Configration</h2>
<p>The following script will queue up messages with a message id of <code>msg001</code> for all devices in the current device repository with a
device configuration of <code>audiosensor</code>.  These messages will be processed by the NuvIoT message processor.  Note that the <em>Device Configuration Key</em>
will be used to to identify the device configuration.</p>
<p>Messages must be JSON.  To handle the message the device configuration with the key <code>audiosensor</code> must be able to handle a message <code>msg001</code></p>
<pre><code>function forwardMessage() {
    let msgId = 'msg001';
    let deviceConfiguration = 'audiosensor';
    let message = {'contents':'helloWorld'};

    enqueuePEM(msgId, deviceId, message);
}
</code></pre>
<hr /><div class="helppage-footer"><p>Copyright Software Logistics - 2018<br/>Documentation Build Date: 3/31/2018 16:16:13<p</div>